#Test journal

# Stage 0 - Github Setup
- Created the repository
- Configured Git and SSH connection on Linux
- Cloned the repo locally

# Stage 1 - First API Call
- Used requests library to call Pendle public API
- Parse JSON response through the following identified fields :

    Identity fields

        id → unique identifier for the market (chainId + contract address)
        address → the smart contract address of the pool on-chain
        chainId → which blockchain (1 = Ethereum mainnet)
        symbol → always "PENDLE-LPT", not very useful
        simpleName → the human-readable pool name, the one you'll use most
        protocol → which protocol the underlying yield comes from (Ethena, Sky, Strata, etc.)

    Time fields

        expiry → when the market expires and PT holders get redeemed
        timestamp → when the market was created
        whitelistedProAt → when it was officially listed on Pendle Pro
        dataUpdatedAt → last time the market data was refreshed

    Token components (each market has 4 tokens)

        pt → Principal Token — fixed yield, redeemable at face value at expiry
        yt → Yield Token — receives all the yield until expiry
        sy → Standardized Yield token — the wrapped version of the underlying
        lp → Liquidity Provider token — represents your share of the pool

    Liquidity & volume

        liquidity.usd → total TVL of the pool in USD — key metric
        totalPt / totalSy / totalLp → raw token quantities in the pool
        tradingVolume.usd → 24h trading volume

    Yield metrics (the most analytically rich fields)

        underlyingApy → the real yield generated by the underlying protocol
        impliedApy → what the market is pricing in as future yield — can diverge from underlying
        swapFeeApy → yield earned just from trading fees in the pool
        pendleApy → additional PENDLE token rewards for LPs
        aggregatedApy → total APY combining all sources above
        maxBoostedApy → maximum APY if you lock vePENDLE
        ytFloatingApy → current floating yield for YT holders
        ptDiscount → how much PT is trading below face value (implies fixed yield)
        ptRoi / ytRoi → return on investment for holding PT or YT to expiry

    Classification

        categoryIds → tags like "stables", "ethena", "points", "rwa"
        isActive → whether the market is still live
        isNew / isFeatured / isPopular → editorial flags from Pendle's team
        votable → whether vePENDLE holders can vote to direct PENDLE rewards to this pool

- Extracted key fields : name, protocol, expiry, liquidity, APY
- Distinction between implied and underlying APY
- Format numbers with round() and percentage conversion

# Stage 3 - Data cleaning & filtering
- Fetched all 413 markets using a while loop pagination
- Filtered out expired markets using datetime comparison
- Filtered out corrupted liquidity values with a threshold
- Sorted results by liquidity and displayed top 10

# Stage 4 - Loop markets over all supported chains
- get the corresponding  chains IDS from https://api-v2.pendle.finance/core/v1/chains
- Implement a list in a separate config.py file
- Use that file to store the APY limit = 100
- Optimize loop logic to call dynamically the chain IDs from the config.py to retrieve data from each chain per iteration
- Set the logic of count_before/after to get the correct numbers of active markets per chain to be printed on screen
- Implement chain_markets iteration to avoid market duplicates

# Stage 5 - Add week history analysis of the top market
- Decision to get the history of the actual active markets (132)
- Get history data from the url https://api-v2.pendle.finance/core/v1/chainId/markets/marketAddress/historical-data?time_frame=week
- Retrieve dynamically the market[0] data using {chainId} and {address}
- Use zip() to re-associate the table format into into a classic parrallel list matching {date, tvl}
- Change the timestamp format from UNIX to YYYY-MM-DD

# Stage 6 - Add historical TVL fetching for all markets
- Loop over all 132 filtered markets to fetch TVL history
- Convert Unix timestamps to readable dates with datetime.fromtimestamp
- Export historical data to pendle_history.csv in long format
- Added time.sleep(0.5) to respect API rate limits
- Change weekly timeframe to daily timeframe history


